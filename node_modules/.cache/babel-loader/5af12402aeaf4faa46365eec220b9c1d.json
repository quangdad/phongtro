{"ast":null,"code":"var _jsxFileName = \"F:\\\\PHONGTRO2\\\\PHONGTRO\\\\client\\\\src\\\\containers\\\\System\\\\EditAccount.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { InputReadOnly, InputFormV2, Button } from '../../components';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { apiUpdateUser } from '../../services';\nimport { fileToBase64 } from '../../ultils/Common/tobase64';\nimport { getCurrent, logout } from '../../store/actions';\nimport Swal from 'sweetalert2';\nimport { useNavigate } from 'react-router-dom';\nimport { path } from '../../ultils/constant';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditAccount = () => {\n  _s();\n\n  var _currentData$id, _currentData$id$match;\n\n  const {\n    currentData\n  } = useSelector(state => state.user);\n  const [image, setImage] = useState('');\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [payload, setPayload] = useState({\n    name: (currentData === null || currentData === void 0 ? void 0 : currentData.name) || '',\n    avatar: (currentData === null || currentData === void 0 ? void 0 : currentData.avatar) || '',\n    fbUrl: (currentData === null || currentData === void 0 ? void 0 : currentData.fbUrl) || '',\n    zalo: (currentData === null || currentData === void 0 ? void 0 : currentData.zalo) || ''\n  });\n\n  const handleSubmit = async () => {\n    console.log(payload);\n    const formData = new FormData();\n    if (payload.name) formData.append('name', payload.name);\n    if (payload.avatar) formData.append('avatar', payload.avatar);\n    if (payload.fbUrl) formData.append('fbUrl', payload.fbUrl);\n    if (payload.zalo) formData.append('zalo', payload.zalo);\n    const response = await apiUpdateUser(formData);\n\n    if ((response === null || response === void 0 ? void 0 : response.data.err) === 0) {\n      Swal.fire('Done', 'Chỉnh sửa thông tin cá nhân thành công', 'success').then(() => {\n        dispatch(getCurrent());\n      });\n    } else {\n      Swal.fire('Oops!', 'Chỉnh sửa thông tin cá nhân không thành công', 'error');\n    }\n  };\n\n  const handleUploadFile = async e => {\n    const imageBase64 = await fileToBase64(e.target.files[0]);\n    setImage(imageBase64);\n    setPayload(prev => ({ ...prev,\n      avatar: e.target.files[0]\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl w-full text-start font-medium py-4 border-b border-gray-200\",\n      children: \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin c\\xE1 nh\\xE2n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-3/5 flex items-center justify-center flex-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"py-6 flex flex-col gap-4 w-full\",\n        children: [/*#__PURE__*/_jsxDEV(InputReadOnly, {\n          value: `#${currentData === null || currentData === void 0 ? void 0 : (_currentData$id = currentData.id) === null || _currentData$id === void 0 ? void 0 : (_currentData$id$match = _currentData$id.match(/\\d/g).join('')) === null || _currentData$id$match === void 0 ? void 0 : _currentData$id$match.slice(0, 6)}` || '',\n          direction: \"flex-row\",\n          label: \"M\\xE3 th\\xE0nh vi\\xEAn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InputFormV2, {\n          name: \"name\",\n          setValue: setPayload,\n          direction: \"flex-row\",\n          value: payload.name,\n          label: \"T\\xEAn hi\\u1EC3n th\\u1ECB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InputFormV2, {\n          name: \"zalo\",\n          setValue: setPayload,\n          direction: \"flex-row\",\n          value: payload.zalo,\n          label: \"Zalo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(InputFormV2, {\n          name: \"fbUrl\",\n          setValue: setPayload,\n          direction: \"flex-row\",\n          value: payload.fbUrl,\n          label: \"Facebook\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"w-48 flex-none\",\n            htmlFor: \"password\",\n            children: \"M\\u1EADt kh\\u1EA9u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => {\n              dispatch(logout());\n              navigate(`/${path.CHANGE_PASSWORD}`);\n            },\n            className: \"flex-auto text-blue-500 h-12 cursor-pointer\",\n            children: \"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"w-48 flex-none\",\n            htmlFor: \"avatar\",\n            children: \"\\u1EA2nh \\u0111\\u1EA1i di\\u1EC7n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: image || payload.avatar,\n              alt: \"avatar\",\n              className: \"w-28 h-28 rounded-full object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: handleUploadFile,\n              type: \"file\",\n              className: \"appearance-none my-4\",\n              id: \"avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          text: \"C\\u1EADp nh\\u1EADt\",\n          bgColor: \"bg-blue-600\",\n          textColor: \"text-white\",\n          onClick: handleSubmit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditAccount, \"oSVt+0PKOfIpDVrwOkWIAFbx6N8=\", false, function () {\n  return [useSelector, useDispatch, useNavigate];\n});\n\n_c = EditAccount;\nexport default EditAccount;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditAccount\");","map":{"version":3,"names":["React","useState","InputReadOnly","InputFormV2","Button","useSelector","useDispatch","apiUpdateUser","fileToBase64","getCurrent","logout","Swal","useNavigate","path","EditAccount","currentData","state","user","image","setImage","dispatch","navigate","payload","setPayload","name","avatar","fbUrl","zalo","handleSubmit","console","log","formData","FormData","append","response","data","err","fire","then","handleUploadFile","e","imageBase64","target","files","prev","id","match","join","slice","CHANGE_PASSWORD"],"sources":["F:/PHONGTRO2/PHONGTRO/client/src/containers/System/EditAccount.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { InputReadOnly, InputFormV2, Button } from '../../components'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { apiUpdateUser } from '../../services'\r\nimport { fileToBase64 } from '../../ultils/Common/tobase64'\r\nimport { getCurrent, logout } from '../../store/actions'\r\nimport Swal from 'sweetalert2'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { path } from '../../ultils/constant'\r\n\r\nconst EditAccount = () => {\r\n    const { currentData } = useSelector(state => state.user)\r\n    const [image, setImage] = useState('')\r\n    const dispatch = useDispatch()\r\n    const navigate = useNavigate()\r\n    const [payload, setPayload] = useState({\r\n        name: currentData?.name || '',\r\n        avatar: currentData?.avatar || '',\r\n        fbUrl: currentData?.fbUrl || '',\r\n        zalo: currentData?.zalo || ''\r\n    })\r\n    const handleSubmit = async () => {\r\n        console.log(payload);\r\n        const formData = new FormData()\r\n        if (payload.name) formData.append('name', payload.name)\r\n        if (payload.avatar) formData.append('avatar', payload.avatar)\r\n        if (payload.fbUrl) formData.append('fbUrl', payload.fbUrl)\r\n        if (payload.zalo) formData.append('zalo', payload.zalo)\r\n        const response = await apiUpdateUser(formData)\r\n        if (response?.data.err === 0) {\r\n            Swal.fire('Done', 'Chỉnh sửa thông tin cá nhân thành công', 'success').then(() => {\r\n                dispatch(getCurrent())\r\n            })\r\n        } else {\r\n            Swal.fire('Oops!', 'Chỉnh sửa thông tin cá nhân không thành công', 'error')\r\n        }\r\n    }\r\n    const handleUploadFile = async (e) => {\r\n        const imageBase64 = await fileToBase64(e.target.files[0])\r\n        setImage(imageBase64)\r\n        setPayload(prev => ({\r\n            ...prev,\r\n            avatar: e.target.files[0]\r\n        }))\r\n    }\r\n    return (\r\n        <div className='flex flex-col h-full items-center'>\r\n            <h1 className='text-3xl w-full text-start font-medium py-4 border-b border-gray-200'>Chỉnh sửa thông tin cá nhân</h1>\r\n            <div className='w-3/5 flex items-center justify-center flex-auto'>\r\n                <div className='py-6 flex flex-col gap-4 w-full'>\r\n                    <InputReadOnly value={`#${currentData?.id?.match(/\\d/g).join('')?.slice(0, 6)}` || ''} direction='flex-row' label='Mã thành viên' />\r\n                    {/* <InputReadOnly value={currentData?.phone} editPhone direction='flex-row' label='Số điện thoại' /> */}\r\n                    <InputFormV2\r\n                        name='name'\r\n                        setValue={setPayload}\r\n                        direction='flex-row'\r\n                        value={payload.name}\r\n                        label='Tên hiển thị' />\r\n                    <InputFormV2\r\n                        name='zalo'\r\n                        setValue={setPayload}\r\n                        direction='flex-row'\r\n                        value={payload.zalo}\r\n                        label='Zalo' />\r\n                    <InputFormV2\r\n\r\n                        name='fbUrl'\r\n                        setValue={setPayload}\r\n                        direction='flex-row'\r\n                        value={payload.fbUrl}\r\n                        label='Facebook' />\r\n                    <div className='flex'>\r\n                        <label className='w-48 flex-none' htmlFor=\"password\">Mật khẩu</label>\r\n                        <div onClick={() => {\r\n                            dispatch(logout())\r\n                            navigate(`/${path.CHANGE_PASSWORD}`)\r\n                        }} className='flex-auto text-blue-500 h-12 cursor-pointer'>Đổi mật khẩu</div>\r\n                    </div>\r\n                    <div className='flex mb-6'>\r\n                        <label className='w-48 flex-none' htmlFor=\"avatar\">Ảnh đại diện</label>\r\n                        <div>\r\n                            <img src={image || payload.avatar} alt=\"avatar\" className='w-28 h-28 rounded-full object-cover' />\r\n                            <input onChange={handleUploadFile} type=\"file\" className='appearance-none my-4' id=\"avatar\" />\r\n                        </div>\r\n\r\n                    </div>\r\n                    <Button\r\n                        text='Cập nhật'\r\n                        bgColor='bg-blue-600'\r\n                        textColor='text-white'\r\n                        onClick={handleSubmit}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditAccount"],"mappings":"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"},"metadata":{},"sourceType":"module"}